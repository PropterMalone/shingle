{
  "name": "Shingle",
  "build": {
    "dockerfile": "Dockerfile",
    "context": ".."
  },
  "mounts": [
    {
      "type": "bind",
      "source": "${localEnv:HOME}/Documents/ClientWork",
      "target": "/workspace/documents"
    },
    {
      "type": "volume",
      "source": "claude-config",
      "target": "/home/node/.claude"
    },
    {
      "type": "bind",
      "source": "${localEnv:HOME}/.shingle",
      "target": "/home/node/.shingle",
      "readonly": true
    }
  ],
  "capAdd": ["NET_ADMIN"],
  "remoteUser": "node",
  "customizations": {
    "vscode": {
      "extensions": [
        "anthropic.claude-code"
      ],
      "settings": {
        "editor.fontSize": 16,
        "explorer.confirmDelete": true,
        "explorer.confirmDragAndDrop": true,
        "git.enabled": false,
        "terminal.integrated.fontSize": 16,
        "workbench.startupEditor": "none"
      }
    }
  },
  "postStartCommand": "git -C /workspaces/shingle pull --ff-only 2>/dev/null || true && sudo chown -R node:node /home/node/.claude && (sudo bash /usr/local/bin/init-firewall.sh || echo '[firewall] Setup failed (non-fatal) â€” network is unrestricted')",
  "postAttachCommand": "bash /usr/local/bin/welcome.sh"
}
